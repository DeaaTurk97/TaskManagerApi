<div class="content-card">
  <h2>Update Task</h2>

  <div *ngIf="loading" class="loading-message">
    <p>Loading task details...</p>
  </div>

  <div *ngIf="error" class="error-message">
    <p>{{ error }}</p>
  </div>

  <div *ngIf="!loading && !error && task" class="task-edit-form">
    <form (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="title">Title:</label>
        <input type="text" id="title" [(ngModel)]="task.title" name="title" required>
      </div>

      <div class="form-group">
        <label for="description">Description:</label>
        <textarea id="description" [(ngModel)]="task.description" name="description" rows="3"></textarea>
      </div>

      <div class="form-group">
        <label for="status">Status:</label>
        <select id="status" [(ngModel)]="task.status" name="status" required class="status-dropdown">
          <option *ngFor="let status of taskStatuses" [value]="status">{{ status }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="assignedTo">Assigned To:</label>
        <select id="assignedTo" [(ngModel)]="task.assignedToUserId" name="assignedTo" class="assigned-user-dropdown">
         <option *ngFor="let user of users" [ngValue]="user.id">{{ user.username }}</option>
        </select>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="goBack()">Cancel</button>
        <button type="submit" class="btn-primary" [disabled]="loading">Save Changes</button>
      </div>
    </form>
  </div>
</div>